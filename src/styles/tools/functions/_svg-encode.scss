$encoding-reference: (
    ('%','%25'),  // This has to go first as all entities start with a %
    ('<','%3C'),
    ('>','%3E'),
    ('"','\''),
    ('#','%23'),
    ('&','%26')
    // More options
    //(' ','%20'),
    //('!','%21'),
    //('$','%24'),
    //(',','%27'),
    //('(','%28'),
    //(')','%29'),
    //('*','%2A'),
    //('+','%2B'),
    //('"','%2C'),
    //('/','%2F'),
    //(':','%3A'),
    //(';','%3B'),
    //('=','%3D'),
    //('?','%3F'),
    //('@','%40'),
    //('[','%5B'),
    //(']','%5D'),
    //('^','%5E'),
    //('`','%60'),
    //('{','%7B'),
    //('|','%7C'),
    //('}','%7D'),
    //('~','%7E'),
    //(',','%E2%80%9A'),
    //('\\','%5C'),
    //('_','%5F'),
    //('-','%2D'),
    //('.','%2E'),
    // ('\','%5C'),
    // (' ','%7F'),
);

@function svg-encode($svg) {

    @each $char, $encoded in $encoding-reference {

        $svg: str-replace($svg, $char, $encoded);
    }

    @return 'data:image/svg+xml,' + $svg;
}